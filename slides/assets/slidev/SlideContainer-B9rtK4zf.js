import{t as v,I as n,B as c,W as P,d as C,a4 as j,P as z,a3 as m,H as D,o as y,b as g,e as w,f as _,h as d,g as V,F}from"../modules/vue-DSgi62rZ.js";import{X as N,Y as o,Z as H,$ as W,n as q,V as $,a0 as M,s as k,a as B,i as A,a1 as L,_ as T}from"../index-CwZfHQU2.js";function U(a){var e;return{info:v(((e=N(a))==null?void 0:e.meta.slide)??null),update:async()=>{}}}const h={};function ae(a){function e(t){return h[t]??(h[t]=U(t))}return{info:n({get(){return e(c(a)).info.value},set(t){e(c(a)).info.value=t}}),update:async(t,s)=>{const r=e(s??c(a)),l=await r.update(t);return l&&(r.info.value=l),l}}}const i=P({});let X=[],Y=[];o(i,"$syncUp",!0);o(i,"$syncDown",!0);o(i,"$paused",!1);o(i,"$onSet",a=>X.push(a));o(i,"$onPatch",a=>Y.push(a));H();o(i,"$patch",async()=>!1);const Z=W(i,i,!0);class G{constructor(){this._capturePromises=new Map}getSnapshot(e){const t=Z.state[e];if(!t)return;const s=N(e);if(s&&(t==null?void 0:t.revision)===(s==null?void 0:s.meta.slide.revision))return t.image}async captureSnapshot(e,t,s=1e3){}async _captureSnapshot(e,t,s){}}const I=new G,J=["id"],K=["id"],O=["src"],Q=C({__name:"SlideContainer",props:{width:{type:Number},meta:{default:()=>({})},isMain:{type:Boolean,default:!1},no:{type:Number,required:!1},useSnapshot:{type:Boolean,default:!1}},setup(a){const e=a,{isPrintMode:t}=q(),s=v(null),r=j(s),l=v(null),b=n(()=>e.width??r.width.value),x=n(()=>e.width?e.width/$.value:r.height.value),u=n(()=>M.value&&!t.value?+M.value:Math.min(b.value/k.value,x.value/B.value)),E=n(()=>({height:`${B.value}px`,width:`${k.value}px`,transform:`translate(-50%, -50%) scale(${u.value})`,"--slidev-slide-scale":u.value})),p=n(()=>e.width?{width:`${e.width}px`,height:`${e.width/$.value}px`}:{});e.isMain&&z(n(()=>`:root { --slidev-slide-scale: ${u.value}; }`)),m(A,u),m(L,l);const f=n(()=>{if(!(!e.useSnapshot||e.no==null))return I.getSnapshot(e.no)});return D(()=>{s.value&&e.useSnapshot&&e.no!=null&&I.captureSnapshot(e.no,s.value)}),(S,R)=>f.value?(y(),g(F,{key:1},[V(" Image preview "),w("img",{src:f.value,class:"w-full object-cover",style:d(p.value)},null,12,O)],64)):(y(),g("div",{key:0,id:a.isMain?"slide-container":void 0,ref_key:"container",ref:s,class:"slidev-slide-container",style:d(p.value)},[w("div",{id:a.isMain?"slide-content":void 0,ref_key:"slideElement",ref:l,class:"slidev-slide-content",style:d(E.value)},[_(S.$slots,"default",{},void 0,!0)],12,K),_(S.$slots,"controls",{},void 0,!0)],12,J))}}),se=T(Q,[["__scopeId","data-v-0b9e2e99"]]);export{se as S,U as a,ae as u};
